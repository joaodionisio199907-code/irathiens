<div class="input-group">
    <label>HANDLE RSI</label>
    <input type="text" id="member-handle" placeholder="Ej: SGT_KAEL">
</div>
<div class="input-group">
    <label>RANGO</label>
    <input type="text" id="member-rank" placeholder="Ej: Piloto de Caza">
</div>
<div class="input-group">
    <label>URL DE LA FOTO (Avatar)</label>
    <input type="text" id="member-photo" placeholder="https://enlace-a-tu-foto.jpg">
</div>

<button onclick="crearMiembro()">REGISTRAR EN EL MANIFIESTO</button>

<script>
    // Actualiza la función crearMiembro dentro de tu script
    async function crearMiembro() {
        const handle = document.getElementById('member-handle').value;
        const rank = document.getElementById('member-rank').value;
        const photo = document.getElementById('member-photo').value;

        if(!handle || !rank) return alert("Completa handle y rango");

        const { error } = await _supabase.from('perfiles').insert([
            { 
                id: crypto.randomUUID(), 
                handle: handle, 
                rank: rank, 
                avatar_url: photo, // Aquí es donde se guarda la foto
                role: 'user' 
            }
        ]);

        if (error) {
            alert("Error: " + error.message);
        } else {
            alert("CIUDADANO REGISTRADO CORRECTAMENTE");
            // Limpiar campos
            document.getElementById('member-handle').value = '';
            document.getElementById('member-rank').value = '';
            document.getElementById('member-photo').value = '';
            loadMembers(); // Recargar la tabla de abajo
        }
    }
</script>
